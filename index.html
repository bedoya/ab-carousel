<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>ABCarousel Demo</title>
        <link rel="stylesheet" href="./dist/ab-carousel.css">
        <style>
            html, body {
                height: 150%;
                margin: 0;
            }

            .ab-carousel {
                width: 600px;
                height: 300px;
                background: #eee;
                margin: 20px auto;
            }

            .ab-carousel-slide {
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 2rem;
                color: white;
                background: #666;
                padding: 20px;
            }

            .countdown {
                position: absolute;
                bottom: 10px;
                right: 10px;
                background: rgba(0, 0, 0, 0.6);
                color: white;
                padding: 4px 8px;
                border-radius: 4px;
                font-family: "Open Sans", sans-serif;
                font-size: 1.2rem;
            }

            .ab-carousel-slide:nth-child(2) {
                background: #3498db;
            }

            .ab-carousel-slide:nth-child(3) {
                background: #e67e22;
            }

            .ab-carousel-slide:nth-child(4) {
                background: #2ecc71;
            }
        </style>
    </head>
    <body>
        <div class="ab-carousel" data-slide_speed="2000">
            <div class="ab-carousel-container">
                <section>
                    Slide 1
                </section>
                <section>
                    Slide 2
                </section>
                <section>
                    Slide 3
                </section>
            </div>
        </div>
        <div class="countdown"></div>

        <script type="module">
            import {ABCarousel} from './dist/ab-carousel.js';

            const carousel = new ABCarousel(document.querySelector('.ab-carousel'), {
                slide_speed: 1500,
                is_active: true
            });

            let countdownInterval;
            const countdown = document.querySelector('.countdown');

            if (document.querySelector('.ab-carousel')) {
                document.querySelector('.ab-carousel').addEventListener('ab-carousel-transition', (e) => {

                    const detail = /** @type {CustomEvent} */ (e).detail;
                    let {speed} = detail;

                    clearInterval(countdownInterval);
                    updateDisplay(speed);

                    countdownInterval = setInterval(() => {
                        speed -= 100;
                        if (speed <= 0) {
                            speed = 0;
                            clearInterval(countdownInterval);
                        }
                        updateDisplay(speed);
                    }, 100);
                });
            }

            function updateDisplay(ms) {
                countdown.textContent = (ms / 1000).toFixed(1);
            }
        </script>
    </body>
</html>
